CREATE TABLE tblDATE
(
	DateID NUMBER (12,0) NOT NULL,
	Date DATE NOT NULL,
	CONSTRAINT Date_PK PRIMARY KEY (DateID)
);


CREATE TABLE tblMATURITY_RATING
(
	RatingID NUMBER (12,0) NOT NULL,
	RatingName VARCHAR2 (20) NOT NULL,
	RatingExplanation VARCHAR2 (50) NOT NULL,
	CONSTRAINT Maturity_Rating_PK PRIMARY KEY (RatingID)
);


CREATE TABLE tblMOVIE
(
	MovieID NUMBER (12,0) NOT NULL,
	MovieName VARCHAR2 (20) NOT NULL,
	Year NUMBER (4,0) NOT NULL,
	Synopsis VARCHAR2 (50) NOT NULL,
	LengthMinutes NUMBER (3,0) NOT NULL,
	DateID NUMBER (12,0) NOT NULL,
	RatingID NUMBER (12,0) NOT NULL,
	Explanation VARCHAR2 (50) NOT NULL,
	CONSTRAINT Movie_PK PRIMARY KEY (MovieID),
	CONSTRAINT Movie_FK1 FOREIGN KEY (DateID) REFERENCES tblDATE(DateID) ON DELETE SET NULL,
	CONSTRAINT Movie_FK2 FOREIGN KEY (RatingID) REFERENCES tblMATURITY_RATING(RatingID) ON DELETE CASCADE
);


CREATE TABLE tblGENRE
(
	GerneID NUMBER (12,0) NOT NULL,
	GenreName VARCHAR2 (20) NOT NULL,
	CONSTRAINT Genre_PK PRIMARY KEY (GenreID)
);


CREATE TABLE tblGENRE_MOVIE
(
	MovieID NUMBER (12,0) NOT NULL,
GerneID NUMBER (12,0) NOT NULL,
	CONSTRAINT Genre_PK PRIMARY KEY (MovieID, GenreID),
CONSTRAINT Genre_Movie_FK1 FOREIGN KEY (MovieID) REFERENCES tblMOVIE(MovieID),
	CONSTRAINT Genre_Movie_FK2 FOREIGN KEY (GenreID) REFERENCES tblGENRE(GenreID) 
);


CREATE TABLE tblPERSON
(
	PersonID NUMBER (12,0) NOT NULL,
	FirstName VARCHAR2 (20) NOT NULL,
	LastName VARCHAR2 (20) NOT NULL,
	BirthDate DATE NOT NULL,
	CONSTRAINT Person_PK PRIMARY KEY (PersonID)
);


CREATE TABLE tblCREDIT
(
	CreditID NUMBER (12,0) NOT NULL,
	CreditName VARCHAR2 (20) NOT NULL,
	PersonID NUMBER (12,0) NOT NULL,
	MovieID NUMBER (12,0) NOT NULL,
	CONSTRAINT Credit_PK PRIMARY KEY (CreditID),
	CONSTRAINT Credit_FK1 FOREIGN KEY (PersonID) REFERENCES tblPERSON(PersonID) ON DELETE SET NULL,
	CONSTRAINT Credit_FK2 FOREIGN KEY (MovieID) REFERENCES tblMOVIE(MovieID) ON DELETE SET NULL
);


CREATE TABLE tblTHEATRE
(
	TheatreID NUMBER (12,0) NOT NULL,
	Name VARCHAR2 (20) NOT NULL,
	LogoImage VARBINARY NOT NULL,
	PostalCode VARCHAR2 (7) NOT NULL,
	Phone VARCHAR2 (14) NOT NULL,
	Other(Theatre_License,_class) VARCHAR2(40) NOT NULL,
	Notice VARCHAR2 (50),
	CONSTRAINT Theatre_PK PRIMARY KEY (TheatreID)
);


CREATE TABLE tblLOCATION
(
	LocationID NUMBER (12,0) NOT NULL,
City VARCHAR2 (20) NOT NULL,
Province VARCHAR2 (20) NOT NULL,
CONSTRAINT Location_PK PRIMARY KEY (LocationID),
CONSTRAINT Location_FK FOREIGN KEY (LocationID) REFERENCES tblTHEATRE(LocationID) 
);


CREATE TABLE tblPERSON_MOVIE
(
	PersonID NUMBER (12,0) NOT NULL,
MovieID NUMBER (12,0) NOT NULL,
CONSTRAINT Person_Movie_PK PRIMARY KEY (PersonID, MovieID),
CONSTRAINT Person_Movie_FK1 FOREIGN KEY (PersonID) REFERENCES tblPERSON(PersonID),
CONSTRAINT Person_Movie_FK2 FOREIGN KEY (MovieID) REFERENCES tblMOVIE(MovieID)
);


CREATE TABLE tblFORMAT
(
	FormatID NUMBER (12,0) NOT NULL,
FormatName VARCHAR2 (20) NOT NULL,
CONSTRAINT Format_PK PRIMARY KEY (FormatID),
);


CREATE TABLE tblMOVIE_FORMAT
(
	MovieID NUMBER (12,0) NOT NULL,
FormatID NUMBER (12,0) NOT NULL,
CONSTRAINT Movie_Format_PK PRIMARY KEY (MovieID, FormatID),
CONSTRAINT Movie_Format_FK1 FOREIGN KEY (MovieID) REFERENCES tblMOVIE(MovieID) ON DELETE CASCADE,
CONSTRAINT Movie_Format_FK2 FOREIGN KEY (FormatID) REFERENCES tblFORMAT(FormatID)
);


CREATE TABLE tblAUDITORIUM
(
FormatID NUMBER (12,0) NOT NULL,
TheatreID NUMBER (12,0) NOT NULL,
AuditoriumID NUMBER (12,0) NOT NULL,
Name VARCHAR2 (20) NOT NULL,
Capacity NUMBER (12,0) NOT NULL,
CONSTRAINT Auditorium_PK PRIMARY KEY (FormatID, TheatreID, AuditoriumID),
CONSTRAINT Auditorium_FK FOREIGN KEY (FormatID, TheatreID) REFERENCES tblTHEATRE_FORMAT(FormatID, TheatreID) 
);


CREATE TABLE tblSHOWTIME
(
MovieID NUMBER (12,0) NOT NULL,
FormatID NUMBER (12,0) NOT NULL,
TheatreID NUMBER (12,0) NOT NULL,
AuditoriumID NUMBER (12,0) NOT NULL,
Showtime VARCHAR2 (7) NOT NULL,
DateID NUMBER (12,0) NOT NULL,
CONSTRAINT Showtime_PK PRIMARY KEY (MovieID, FormatID, TheatreID, AuditoriumID, Showtime, DateID),
CONSTRAINT Showtime_FK1 FOREIGN KEY (MovieID, FormatID) REFERENCES tblMOVIE_FORMAT(MovieID, FormatID),
CONSTRAINT Showtime_FK2 FOREIGN KEY (AuditoriumID) REFERENCES tblAUDITORIUM(AuditoriumID),
CONSTRAINT Showtime_FK3 FOREIGN KEY (DateID) REFERENCES tblDATE(DateID)
);


CREATE TABLE tblTHEATRE_FORMAT
(
FormatID NUMBER (12,0) NOT NULL,
TheatreID NUMBER (12,0) NOT NULL,
CONSTRAINT Theatre_Format_PK PRIMARY KEY (FormatID, TheatreID),
CONSTRAINT Theatre_Format_FK1 FOREIGN KEY (FormatID) REFERENCES tblFORMAT(FormatID),
CONSTRAINT Theatre_Format_FK2 FOREIGN KEY (TheatreID) REFERENCES tblTHEATRE(TheatreID) 
);


CREATE TABLE tblAGE_GROUP
(
AgeID NUMBER (12,0) NOT NULL,
Agename VARCHAR2 (20) NOT NULL,
Age NUMBER (12,0) NOT NULL,
Price NUMBER (12,0) NOT NULL,
FormatID NUMBER (12,0) NOT NULL,
TheatreID NUMBER (12,0) NOT NULL,
DateID NUMBER (12,0) NOT NULL,
CONSTRAINT Age_Group_PK PRIMARY KEY (AgeID),
CONSTRAINT Age_Group_FK1  FOREIGN KEY (FormatID, TheatreID) REFERENCES tblTHEATRE_FORMAT(FormatID, TheatreID),
CONSTRAINT Age_Group_FK2  FOREIGN KEY (DateID) REFERENCES tblDATE(DateID) 
);


CREATE TABLE tblDATE_THEATRE_FORMAT
(
FormatID NUMBER (12,0) NOT NULL,
TheatreID NUMBER (12,0) NOT NULL,
DateID NUMBER (12,0) NOT NULL,
CONSTRAINT Date_Theatre_Format_PK PRIMARY KEY (FormatID, TheatreID, DateID),
CONSTRAINT Date_Theatre_Format_FK1 FOREIGN KEY (FormatID, TheatreID) REFERENCES tblTHEATRE_FORMAT(FormatID, TheatreID),
CONSTRAINT Date_Theatre_Format_FK2 FOREIGN KEY (DateID) REFERENCES tblDATE(DateID) 
);
